#:kivy 1.0

<LabelU@Label>:
    font_name: 'fonts/Ubuntu-R.ttf'
    font_size: '30sp'
    color: 0.2, 0.2, 0.2, 1

<LabelUA@Label>:
    font_name: 'fonts/Ubuntu-R.ttf'
    font_size: '15sp'
    color: 0.2, 0.2, 0.2, 1
    size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]

<ConfirmPopup>:
    canvas.before:
        Color:
            rgba: 0.98, 0.76, 0.23, 1
        Rectangle:
            # self here refers to the widget i.e BoxLayout
            pos: self.pos
            size: self.size
    cols:1
    LabelU:
        font_size: '20sp'
        text: root.text
    GridLayout:
        cols: 2
        size_hint_y: None
        height: '44sp'
        ButtonUok:
            on_release: root.dispatch('on_answer', True)
        ButtonUcancel:
            on_release: root.dispatch('on_answer', False)

<WarningPopup>:
    title: "Advertencia"
    size_hint: None, None
    size: 400, 400
    auto_dismiss: False
    BoxLayout:
        canvas.before:
            Color:
                rgba: 0.98, 0.76, 0.23, 1
            Rectangle:
                # self here refers to the widget i.e BoxLayout
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        LabelU:
            font_size: '20sp'
            text: root.mensaje
            size_hint: 1, 0.8
        ButtonU:
            text: 'Aceptar'
            size_hint: 1, 0.2
            on_press: root.dismiss()

<ButtonU@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtn.png'
    background_down: 'images/buttons/downbtn.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1

<ButtonUok@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtnok.png'
    background_down: 'images/buttons/downbtnok.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1
    Image:
        source: 'images/buttons/accept.png'
        y: self.parent.y + self.parent.height - 38
        x: self.parent.x + self.parent.width - 100
        size: 32, 32
        allow_stretch: True

<ButtonUnext@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtnok.png'
    background_down: 'images/buttons/downbtnok.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1
    Image:
        source: 'images/buttons/next.png'
        y: self.parent.y + self.parent.height - 38
        x: self.parent.x + self.parent.width - 100
        size: 32, 32
        allow_stretch: True

<ButtonUback@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtn.png'
    background_down: 'images/buttons/downbtn.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1
    Image:
        source: 'images/buttons/back.png'
        y: self.parent.y + self.parent.height - 38
        x: self.parent.x + self.parent.width - 100
        size: 32, 32
        allow_stretch: True

<ButtonUcancel@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtncancel.png'
    background_down: 'images/buttons/downbtncancel.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1
    Image:
        source: 'images/buttons/cancel.png'
        y: self.parent.y + self.parent.height - 38
        x: self.parent.x + self.parent.width - 100
        size: 32, 32
        allow_stretch: True

<ButtonUanular@Button>:
    font_name: 'fonts/Ubuntu-R.ttf'
    background_normal: 'images/buttons/normalbtncancel.png'
    background_down: 'images/buttons/downbtncancel.png'
    border: 20, 20, 20, 20
    color: 0.2, 0.2, 0.2, 1

# TODO ServiceScreen
<ServiceScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: 'Servicios'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        GridLayout:
            cols:3
            rows:1
            padding: 175
            spacing: 10
            size_hint: 1, 0.8
            ButtonU:
                on_press: root.imprimir()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/printer.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Ticket de Prueba'
            ButtonU:
                on_press: root.confirmacion()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/billetes.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Retiro de Dinero'
            ButtonU:
                on_press: root.informacion()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/info.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Información'
        BoxLayout:
            size_hint: 0.2, 0.1
            ButtonU:
                on_press: root.cancel()
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 20
                    LabelU:
                        text: 'Volver'
                    Image:
                        source: 'images/buttons/back.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 70
                        size: 150, 150
                        allow_stretch: True

# TODO InfoScreen
<InfoScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: 'Información'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        BoxLayout:
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: 0.92, 0.93, 0.94, 0.3
                Rectangle:
                    # self here refers to the widget i.e BoxLayout
                    pos: self.pos
                    size: self.size
            size_hint: 1, 0.7
            GridLayout:
                cols:2
                rows:4
                padding: 30
                spacing: 10
                size_hint: 0.7, 0.4
                LabelUA:
                    font_size: '20sp'
                    text: "Ubicación"
                LabelU:
                    font_size: '20sp'
                    id: ubicacion
                LabelUA:
                    font_size: '20sp'
                    text: "Unidad"
                LabelU:
                    font_size: '20sp'
                    id: unidad
                LabelUA:
                    font_size: '20sp'
                    text: "Hora de Inicio"
                LabelU:
                    font_size: '20sp'
                    id: hora_inicio
                LabelUA:
                    font_size: '20sp'
                    text: "Hora de Cierre"
                LabelU:
                    font_size: '20sp'
                    id: hora_cierre
            LabelU:
                text: "Hardware"
                font_size: '40sp'
                size_hint: 0.7, 0.1
            GridLayout:
                cols:3
                rows:3
                padding: 20
                spacing: 20
                size_hint: 0.7, 0.5
                LabelUA:
                    font_size: '20sp'
                    text: "Conexion"
                LabelUA:
                    font_size: '20sp'
                    id: conexion
                ButtonU:
                    text: "Probar"
                    id: try_conexion
                    on_press: root.try_conexion()
                LabelUA:
                    font_size: '20sp'
                    text: "Papel"
                LabelUA:
                    font_size: '20sp'
                    id: papel
                ButtonU:
                    text: "Probar"
                    id: try_papel
                    on_press: root.try_papel()
                LabelUA:
                    font_size: '20sp'
                    text: "Billetes\r\n"
                AsyncImage:
                    id: ingresado
                    source: ""
                ButtonU:
                    text: "Probar"
                    id: try_billetes
                    on_press: root.try_billetes()
        BoxLayout:
            size_hint: 1, 0.1
        BoxLayout:
            size_hint: 0.2, 0.1
            ButtonU:
                on_press: root.cancel()
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 20
                    LabelU:
                        text: 'Volver'
                    Image:
                        source: 'images/buttons/back.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 70
                        size: 150, 150
                        allow_stretch: True

# TODO MainScreen
<MainScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 20
        BoxLayout:
            size_hint: 0.2, 1
            AsyncImage:
                source: root.data['aside']
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 1
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 80
                size_hint: 1, 0.6
                LabelU:
                    text: 'Ingresar al Menu de Control'
                    valign: 'top'
                    font_size: '40sp'
                    size_hint: 1, 0.1
                    padding: (40, 30)
                GridLayout:
                    cols: 2
                    rows: 2
                    padding: 40
                    spacing: 10
                    size_hint: 1, 0.7
                    LabelU:
                        text: 'DNI'
                        size_hint: 0.2, 1
                    Input:
                        id: dni
                        hint_text: 'DNI sin puntos'
                    LabelU:
                        text: 'Password'
                        size_hint: 0.2, 1
                    Input:
                        id: passw
                        hint_text: 'Tu password'
                        password: True
                BoxLayout:
                    size_hint: 1, 0.2
                    spacing: 150
                    ButtonUok:
                        text: 'Aceptar'
                        font_size: 20
                        on_press: root.validar()
                    ButtonUcancel:
                        text: 'Cancelar'
                        font_size: 20
                        on_press: root.cancel()
            BoxLayout:
                size_hint: 1, 0.4
                AsyncImage:
                    source: root.data['footer']

# TODO ControlScreen
<ControlScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: '\rSistema de Tickets del Comedor Universitario\r\n Pantalla de Control'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        GridLayout:
            cols:3
            rows:1
            padding: 200
            spacing: 10
            ButtonU:
                on_press: root.iniciar()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/iniciar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Iniciar'
            ButtonU:
                on_press: root.servicios()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/servicios.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Servicios'
            ButtonU:
                on_press: root.confirmacion()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/control/apagar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Apagar'

# TODO SplashScreen
<SplashScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: 'Sistema de Tickets del Comedor Universitario'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        GridLayout:
            cols:3
            rows:1
            padding: 200
            spacing: 10
            ButtonU:
                on_press: root.login()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/home/entrar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Ingresar'
            ButtonU:
                on_press: root.registro()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/home/registrar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Registrarse'
            ButtonU:
                on_press: # root.manager.current = 'ayuda'
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/home/ayuda.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Ayuda'
        LabelU:
            id: disponibles
            text: ''
            font_size: '40sp'
            size_hint: 1, 0.1 


<Input@TextInput>:
    multiline: False
    font_name: 'fonts/Ubuntu-R.ttf'

# TODO FormScreen
<FormScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 20
        BoxLayout:
            size_hint: 0.2, 1
            AsyncImage:
                source: root.datos['aside']
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 1
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 80
                size_hint: 1, 0.6
                LabelU:
                    text: 'Formulario de Registro'
                    valign: 'top'
                    font_size: '40sp'
                    size_hint: 1, 0.1
                    padding: (40, 30)
                GridLayout:
                    cols: 4
                    rows: 3
                    padding: 10
                    spacing: 10
                    size_hint: 1, 0.7
                    LabelU:
                        text: 'Nombre'
                        size_hint: 0.2, 1
                    Input:
                        id: nombre
                        hint_text: 'Nombre y Apellido'
                        size_hint: 0.4, 1
                    LabelU:
                        text: 'Facultad'
                        size_hint: 0.2, 1
                    Spinner:
                        id: facultad
                        values: root.facultades_nombre
                        size_hint: 0.4, 1
                    LabelU:
                        text: 'DNI'
                        size_hint: 0.2, 1
                    Input:
                        id: dni
                        hint_text: 'DNI sin puntos'
                        size_hint: 0.4, 1
                    LabelU:
                        text: 'Provincia'
                        size_hint: 0.2, 1
                    Spinner:
                        id: provincia
                        values: root.provincias_nombre
                        size_hint: 0.4, 1
                    LabelU:
                        text: 'LU'
                        size_hint: 0.2, 1
                    Input:
                        id: lu
                        hint_text: 'Libreta Universitaria'
                        size_hint: 0.4, 1
                    LabelU:
                        text: 'Email'
                        size_hint: 0.2, 1
                    Input:
                        id: mail
                        hint_text: 'Correo Electronico'
                        size_hint: 0.4, 1
                BoxLayout:
                    size_hint: 1, 0.2
                    spacing: 150
                    ButtonUok:
                        text: 'Aceptar'
                        font_size: 20
                        on_press: root.validar()
                    ButtonUcancel:
                        text: 'Cancelar'
                        font_size: 20
                        on_press: root.cancel()
            BoxLayout:
                size_hint: 1, 0.4
                AsyncImage:
                    source: root.datos['footer']

# TODO LoginScreen
<LoginScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 20
        BoxLayout:
            size_hint: 0.2, 1
            AsyncImage:
                source: root.data['aside']
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 1
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 80
                size_hint: 1, 0.6
                LabelU:
                    text: 'Ingresar'
                    valign: 'top'
                    font_size: '40sp'
                    size_hint: 1, 0.1
                    padding: (40, 30)
                GridLayout:
                    cols: 2
                    rows: 2
                    padding: 40
                    spacing: 10
                    size_hint: 1, 0.7
                    LabelU:
                        text: 'DNI'
                        size_hint: 0.2, 1
                    Input:
                        id: dni
                        hint_text: 'DNI sin puntos'
                    LabelU:
                        text: 'Password'
                        size_hint: 0.2, 1
                    Input:
                        id: passw
                        hint_text: 'Tu password'
                        password: True
                BoxLayout:
                    size_hint: 1, 0.2
                    spacing: 150
                    ButtonUok:
                        text: 'Aceptar'
                        font_size: 20
                        on_press: root.validar()
                    ButtonUcancel:
                        text: 'Cancelar'
                        font_size: 20
                        on_press: root.cancel()
            BoxLayout:
                size_hint: 1, 0.4
                AsyncImage:
                    source: root.data['footer']

# TODO PasswordScreen
<PasswordScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Cambio de Contraseña'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Facultad'
                    LabelUA:
                        text: root.data['facultad']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1
                GridLayout:
                    cols: 2
                    rows: 3
                    padding: 20
                    spacing: 10
                    size_hint: 1, 0.4
                    LabelU:
                        text: 'Password actual'
                        size_hint: 0.2, 0.4
                    Input:
                        id: old_pass
                        hint_text: 'Password Actual'
                        password: True
                        size_hint: 0.2, 0.6
                    LabelU:
                        text: 'Password Nuevo'
                        size_hint: 0.2, 0.4
                    Input:
                        id: new_pass
                        hint_text: 'Tu nuevo password'
                        password: True
                        size_hint: 0.2, 0.6
                    LabelU:
                        text: 'Password Nuevo'
                        size_hint: 0.2, 0.4
                    Input:
                        id: re_new_pass
                        hint_text: 'Repite tu nuevo password'
                        password: True
                        size_hint: 0.2, 0.6
                BoxLayout:
                    size_hint: 1, 0.5
                BoxLayout:
                    size_hint: 1, 0.1
                    spacing: 150
                    ButtonUok:
                        text: 'Aceptar'
                        font_size: 20
                        on_press: root.validar();
                    ButtonUcancel:
                        text: 'Cancelar'
                        font_size: 20
                        on_press: root.cancel();

# TODO MenuScreen
<MenuScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: 'Menu Principal de Usuario'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        GridLayout:
            cols:3
            rows:1
            padding: 200
            spacing: 10
            ButtonU:
                on_press: root.comprar()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/comprar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Comprar'
            ButtonU:
                on_press: root.options()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/opciones.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Opciones'
            ButtonU:
                on_press: root.logout()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/salir.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Salir'

# TODO OptionScreen
<OptionScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        padding: 30
        LabelU:
            text: 'Opciones'
            valign: 'top'
            font_size: '60sp'
            size_hint: 1, 0.1 
        GridLayout:
            cols:3
            rows:1
            padding: 175
            spacing: 10
            size_hint: 1, 0.8
            ButtonU:
                on_press: root.anular()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/anular.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Anular tickets'
            ButtonU:
                on_press: root.cargar()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/cargar.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Cargar Monedero'
            ButtonU:
                on_press: root.perfil()
                BoxLayout:
                    orientation: 'vertical'
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 40
                    Image:
                        source: 'images/menu/perfil.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 170
                        size: 100, 100
                        allow_stretch: True
                    LabelU:
                        text: 'Perfil'
        BoxLayout:
            size_hint: 0.2, 0.1
            ButtonU:
                on_press: root.cancel()
                BoxLayout:
                    pos: self.parent.pos
                    size: self.parent.size
                    padding: 20
                    LabelU:
                        text: 'Volver'
                    Image:
                        source: 'images/buttons/back.png'
                        y: self.parent.y + self.parent.height - 150
                        x: self.parent.x + self.parent.width - 70
                        size: 150, 150
                        allow_stretch: True

# TODO ProfileScreen
<ProfileScreen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Perfil'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Facultad'
                    LabelUA:
                        text: root.data['facultad']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1
                GridLayout:
                    cols: 2
                    rows: 5
                    padding: 20
                    spacing: 15
                    size_hint: 1, 0.6
                    LabelU:
                        text: 'Nombre'
                    Input:
                        id: nombre
                        text: root.data['nombre']
                    LabelU:
                        text: 'Email'
                    Input:
                        id: email
                        text: root.data['email']
                    LabelU:
                        text: 'Provincia'
                    Spinner:
                        id: provincia
                        text: root.data['provincia']
                        values: root.provincias_nombre
                    LabelU:
                        text: 'Password'
                    ButtonU:
                        text: 'Cambiar'
                        on_press: root.cambiar_pass()
                BoxLayout:
                    size_hint: 1, 0.3
                BoxLayout:
                    size_hint: 1, 0.1
                    spacing: 150
                    ButtonUok:
                        text: 'Actualizar'
                        font_size: 20
                        on_press: root.validar();
                    ButtonUcancel:
                        text: 'Cancelar'
                        font_size: 20
                        on_press: root.cancel();

# TODO AnularScreen
<AnularScreen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Anulación de Tickets'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'Nombre'
                    LabelUA:
                        id: nombre
                        text: root.data['nombre']
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1
                GridLayout:
                    cols: 2
                    rows: 2
                    padding: 50
                    spacing: 15
                    size_hint: 1, 0.4
                    LabelU:
                        text: 'Codigo'
                    LabelU:
                        text: ''
                    Input:
                        id: id_ticket
                        hint_text: 'Codigo del ticket'
                    ButtonUanular:
                        text: 'Anular'
                        on_press: root.confirmacion()
                BoxLayout:
                    size_hint: 1, 0.5
                BoxLayout:
                    size_hint: 0.4, 0.1
                    spacing: 150
                    ButtonUback:
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel();

# TODO CargaScreen
<CargaScreen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Carga de Saldo'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 3
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'Nombre'
                    LabelUA:
                        id: nombre
                        text: root.data['nombre']
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1                    
                BoxLayout:
                    size_hint: 1, 0.2
                    LabelU:
                        text: 'Ingreso de efectivo'
                GridLayout:
                    cols: 2
                    rows: 2
                    size_hint: 1, 0.6
                    padding: 60
                    spacing: 30
                    LabelU:
                        font_size: 30
                        text: 'Su SALDO es'
                    LabelU:
                        id: saldo
                        font_size: 30
                        text: root.data['saldo']
                    LabelU:
                        font_size: 30
                        text: 'Dinero ingresado'
                    AsyncImage:
                        id: ingresado
                        source: ''
                BoxLayout:
                    size_hint: 0.4, 0.1
                    ButtonUok:
                        id: btn_confirmar
                        text: 'Confirmar'
                        disabled: True
                        on_press: root.cargar_billetes()
                BoxLayout:
                    size_hint: 0.4, 0.1
                    spacing: 150
                    ButtonUback:
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel();

# TODO Compra2Screen
<Compra2Screen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Compra de Tickets'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'Nombre'
                    LabelUA:
                        id: nombre
                        text: root.data['nombre']
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1                    
                BoxLayout:
                    size_hint: 1, 0.2
                    LabelU:
                        text: 'PASO 2: Ingreso de efectivo'
                GridLayout:
                    cols: 2
                    rows: 2
                    size_hint: 1, 0.6
                    padding: 60
                    spacing: 30
                    LabelU:
                        font_size: 30
                        text: 'Dinero faltante para\r\n realizar la compra'
                    LabelU:
                        id: faltante
                        font_size: 30
                        text: root.data['faltante']
                    LabelU:
                        font_size: 30
                        text: 'Dinero ingresado'
                    AsyncImage:
                        id: ingresado
                        source: ''
                BoxLayout:
                    size_hint: 0.4, 0.1
                    ButtonUok:
                        id: btn_confirmar
                        text: 'Confirmar'
                        disabled: True
                        on_press: root.cargar_billetes()
                BoxLayout:
                    size_hint: 0.4, 0.1
                    spacing: 150
                    ButtonUback:
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel();

# TODO Compra1Screen
<Compra1Screen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Compra de Tickets'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'Nombre'
                    LabelUA:
                        id: nombre
                        text: root.data['nombre']
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1                    
                BoxLayout:
                    size_hint: 1, 0.2
                    LabelU:
                        text: 'PASO 1: Elegir día/s'
                BoxLayout:
                    size_hint: 1, 0.1
                    LabelU:
                        text: 'Compra posible con saldo: '
                    LabelU:
                        id: posibles
                GridLayout:
                    size_hint: 1, 0.4
                    padding: 20
                    spacing: 30
                    cols: 2
                    rows: 2
                    # fila 1 labels
                    LabelU:
                        text: 'Desde'
                    LabelU:
                        text: 'Hasta'
                    # fila 1 fecha desde o única
                    Spinner:
                        id: desde
                        values: []
                    Spinner:
                        id: hasta
                        values: []
                BoxLayout:
                    size_hint: 1, 0.2
                BoxLayout:
                    size_hint: 1, 0.1
                    spacing: 150
                    ButtonUback:
                        id: btn_back
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel()
                    ButtonUnext:
                        id: btn_next
                        text: 'Continuar'
                        font_size: 20
                        on_press: root.medio_de_pago()

# TODO Compra3Screen
<Compra3Screen>:
    on_enter: root.update_datos()
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Compra de Tickets'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                AsyncImage:
                    source: root.data['ruta_foto']
                    size_hint: 1, 0.4
                GridLayout:
                    cols: 2
                    rows: 4
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.2
                    LabelUA:
                        text: 'Nombre'
                    LabelUA:
                        id: nombre
                        text: root.data['nombre']
                    LabelUA:
                        text: 'DNI'
                    LabelUA:
                        text: root.data['dni']
                    LabelUA:
                        text: 'Categoria'
                    LabelUA:
                        text: root.data['categoria']
                    LabelUA:
                        text: 'Saldo'
                    LabelUA:
                        id: saldo
                        text: root.data['saldo']
                BoxLayout:
                    size_hint: 1, 0.4
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1                    
                BoxLayout:
                    size_hint: 1, 0.2
                    LabelU:
                        text: root.data['titulo']
                GridLayout:
                    size_hint: 1, 0.4
                    padding: 20
                    spacing: 30
                    cols: 2
                    rows: 2
                    LabelU:
                        text: 'Cantidad'
                    LabelU:
                        id: cantidad
                        text: root.data['cantidad']
                    LabelU:
                        text: 'Total'
                    LabelU:
                        id: total
                        text: root.data['total']
                BoxLayout:
                    size_hint: 1, 0.3
                BoxLayout:
                    size_hint: 1, 0.1
                    spacing: 150
                    ButtonUback:
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel();
                    ButtonUnext:
                        text: 'Comprar'
                        font_size: 20
                        on_press: root.confirmar_tickets();

# TODO AyudaScreen
<AyudaScreen>:
    canvas.before:
        BorderImage:
            source: 'images/misc/background.png'
            pos: self.pos
            size: self.size
    BoxLayout:
        padding: 40
        orientation: 'vertical'
        LabelU:
            text: 'Ayuda'
            valign: 'top'
            font_size: '40sp'
            size_hint: 1, 0.1
            padding: (40, 30)
        BoxLayout:
            size_hint: 1, 0.9
            spacing: 30
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                size_hint: 0.3, 1
                LabelU:
                    text: 'Temas'
                    size_hint: 1, 0.1
                GridLayout:
                    cols: 1
                    rows: 6
                    padding: 40
                    spacing: 20
                    size_hint: 1, 0.6
                    ButtonU:
                        text: 'Ingreso'
                        on_press: root.play('ingreso')
                    ButtonU:
                        text: 'Registro'
                        on_press: root.play('registro')
                    ButtonU:
                        text: 'Compra'
                        on_press: root.play('compra')
                    ButtonU:
                        text: 'Carga'
                        on_press: root.play('carga')
                    ButtonU:
                        text: 'Anulación'
                        on_press: root.play('anulacion')
                    ButtonU:
                        text: 'Perfil'
                        on_press: root.play('perfil')
                BoxLayout:
                    size_hint: 1, 0.2
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: 0.92, 0.93, 0.94, 0.3
                    Rectangle:
                        # self here refers to the widget i.e BoxLayout
                        pos: self.pos
                        size: self.size
                orientation: 'vertical'
                padding: 20
                spacing: 30
                size_hint: 0.7, 1                    
                BoxLayout:
                    size_hint: 1, 0.2
                    LabelU:
                        id: titulo
                        text: root.data['titulo']
                Video:
                    id: player
                    size_hint: 1, 0.7
                    source: ''
                    allow_fullscreen: False
                    thumbnail: 'images/home/ayuda.png'
                BoxLayout:
                    size_hint: 0.4, 0.1
                    spacing: 150
                    ButtonUback:
                        text: 'Volver'
                        font_size: 20
                        on_press: root.cancel();
